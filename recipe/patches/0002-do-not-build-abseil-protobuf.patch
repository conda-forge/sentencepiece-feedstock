From 30950bb7795a7a6206d9d7a4b78168e7ae60dd69 Mon Sep 17 00:00:00 2001
From: "H. Vetinari" <h.vetinari@gmx.com>
Date: Thu, 2 Dec 2021 10:05:12 +1100
Subject: [PATCH 2/2] do not build abseil & protobuf

also build third_party before src
---
 CMakeLists.txt             | 4 ++--
 third_party/CMakeLists.txt | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index a3870cb..012f722 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -104,11 +104,11 @@ if (SPM_BUILD_TEST)
 endif()
 
 if (SPM_USE_EXTERNAL_ABSL)
- add_subdirectory(third_party/abseil-cpp)
+ find_package(absl REQUIRED)
 endif()
 
-add_subdirectory(src)
 add_subdirectory(third_party)
+add_subdirectory(src)
 
 set(CPACK_SOURCE_GENERATOR "TXZ")
 set(CPACK_GENERATOR "7Z")
diff --git a/third_party/CMakeLists.txt b/third_party/CMakeLists.txt
index d00ecba..7e2e07b 100644
--- a/third_party/CMakeLists.txt
+++ b/third_party/CMakeLists.txt
@@ -1,4 +1,4 @@
-include_directories(absl/strings darts_clone esaxx protobuf-lite)
+include_directories(abseil/strings darts_clone esaxx)
 
 
 
-- 
2.32.0.windows.2

